<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <textarea id="passwordArea" cols="128" placeholder="Password will appear here"></textarea>
    <br>
    <button onclick="getPassword()">Get Password</button>

    <script>
        function getPassword() {
            var wantsLowerCase;
            var wantsUpperCase;
            var wantsNumerical;
            var wantsSpecial;

            var choicesString;

            var validChoices = false;

            while (!validChoices) {

                choicesString = "";

                wantsLowerCase = confirm("Do you want lower case characters?");
                wantsUpperCase = confirm("Do you want upper case characters?");
                wantsNumerical = confirm("Do you want numerical characters?");
                wantsSpecial = confirm("Do you want special characters?");

                if (wantsLowerCase) {
                    choicesString += "abcdefghijklmnopqrstuvwxyz";
                }
                if (wantsUpperCase) {
                    choicesString += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                }
                if (wantsNumerical) {
                    choicesString += "0123456789";
                }
                if (wantsSpecial) {
                    choicesString += "!@#$%^&*";
                }

                validChoices = wantsLowerCase || wantsUpperCase || wantsNumerical || wantsSpecial;

                if (!validChoices) {
                    alert("Please choose at least one set of characters");
                }
            }

            console.log(choicesString);

            var passLength;
            var invalidPassLength = true;

            while (invalidPassLength) {
                promptAnswer = prompt("How long do you want your password to be (8-128)?");

                passLength = parseInt(promptAnswer);

                invalidPassLength = isNaN(passLength) || passLength < 8 || passLength > 128;

                if (invalidPassLength) {
                    alert("Please choose a number between 8 and 128")
                }
            }

            var result = "";
            var choicesLength = choicesString.length;
            for (var i = 0; i < passLength; i++) {
                result += choicesString.charAt(Math.floor(Math.random() * choicesLength));
            }

            console.log(result);

            var passwordArea = document.getElementById("passwordArea");
            passwordArea.value = result;
        }
    </script>
</body>

</html>